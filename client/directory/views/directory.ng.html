<section layout="row">
  <span flex></span>
    <md-content flex="70" flex-xs="90">
      <md-list>
        <md-subheader class="md-no-sticky">Whangarei Food Co-op Producers</md-subheader>
        <md-list-item layout="row">
          <md-input-container flex>
            <md-icon md-svg-icon="action:ic_search_24px"></md-icon>
            <input type="text" placeholder="search" ng-model="dir.searchstring">
          </md-input-container>
          <md-input-container flex>
            <md-icon md-svg-icon="social:ic_location_city_24px"></md-icon>
            <md-select style="margin-bottom:24px" placeholder="Filter by Town" aria-label="Search by town" ng-model="dir.townSearch">
              <md-option ng-value="">All</md-option>
              <md-option ng-value="town.value" ng-repeat="town in dir.towns">{{town.label}}</md-option>
            </md-select>
          </md-input-container>
          <md-input-container flex>
            <md-icon md-svg-icon="content:ic_sort_24px"></md-icon>
            <md-select style="margin-bottom:24px" placeholder="sort by" aria-label="Sort Ascending or Descending" ng-model="dir.sort">
              <md-option ng-value="{createdAt: -1}">Newest</md-option>
              <md-option ng-value="{createdAt: 1}">Oldest</md-option>
              <md-option ng-value="{'profile.name': 1}">Alphabetical</md-option>
            </md-select>
          </md-input-container>
        </md-list-item>
        <md-list-item ng-repeat="u in dir.producers | filter:dir.searchstring track by u._id" class="md-3-line" ng-click="nav.goTo('producer', {producerId: u._id})">
          <cl-image public-id="{{u.profile.logo.result}}" class="md-avatar">
            <cl-transformation height="80" width="80" crop="fill" gravity="center"></cl-transformation>
          </cl-image>

          <div class="md-list-item-text" md-menu-origin>
            <h3>{{u.profile.name}}</h3>
            <p>{{u.profile.deliveryAddress.formatted_address}}</p>
            <p>Member since {{ u.createdAt | date:'mediumDate' }}</p>
          </div>
          <md-button class="md-secondary is-liked md-icon-button" ng-class="dir.likesProducer(u._id)" ng-click="dir.toggleLike(u._id)">
            <md-icon md-svg-icon="action:ic_favorite_24px"></md-icon>
          </md-button>
        </md-list-item>
      </md-list>
    </md-content>
      
  
  <span flex></span>

</section>