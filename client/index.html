<head>
  <base href="/">
</head>
<body ng-app="food-coop" ng-controller="navCtrl as nav">

  <md-toolbar md-scroll-shrink layout="row" layout-sm="column" layout-align="start center" layout-padding class="no-print">
    <div class="md-toolbar-tools">
      <md-button ng-click="nav.toggleLeft()">
        <md-icon md-svg-icon="navigation:ic_menu_24px"></md-icon>
      </md-button>
      <h3>
        <span>Food Co-op (alpha)</span>
      </h3>
      <span flex></span>
      <!-- <md-button hide-sm ui-sref="store"> <md-icon md-svg-icon="action:ic_shopping_cart_24px"></md-icon> Store</md-button> -->
      <!-- <md-button hide-sm ui-sref="hubs"> <md-icon md-svg-icon="action:ic_store_24px">store</md-icon> Hubs</md-button> -->
      <!-- <md-button hide-sm ui-sref="faq"> How it Works</md-button> -->

      <md-button ng-href="/login" ng-hide="$root.currentUser">Login</md-button>
      <md-button ng-href="/register" ng-hide="$root.currentUser">Sign up</md-button>
      <md-menu ng-show="$root.currentUser">
        <md-icon md-menu-origin ng-mouseenter="$mdOpenMenu($event)"
        md-svg-icon="action:ic_account_box_24px"></md-icon>
        <md-menu-content>
          <md-menu-item>
            <p flex><strong>{{ currentUser.profile.name }} #{{currentUser.profile.customerNumber}}</strong></p>
          </md-menu-item>
          <md-menu-divider></md-menu-divider>
          <md-menu-item>
            <md-button ui-sref="profile.balance">
              <div layout="row">
                <md-icon md-svg-icon="action:ic_account_balance_24px"></md-icon>
                <p flex>Balance: {{currentUser.profile.balance | currency}}</p>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ui-sref="profile.cart">
              <div layout="row">
                <md-icon md-svg-icon="action:ic_shopping_basket_24px"></md-icon>
                <p flex>Cart</p>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ui-sref="profile.orders">
              <div layout="row">
                <md-icon md-svg-icon="action:ic_description_24px"></md-icon>
                <p flex>Orders</p>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item ng-if="nav.isProducer(currentUser._id)">
            <md-button ui-sref="profile.sales">
              <div layout="row">
                <md-icon md-svg-icon="action:ic_description_24px"></md-icon>
                <p flex>Sales</p>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ui-sref="profile.edit">
              <div layout="row">
                <md-icon md-svg-icon="editor:ic_mode_edit_24px"></md-icon>
                <p flex>Edit My Details</p>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ui-sref="profile.paymentMethods">
              <div layout="row">
                <md-icon md-svg-icon="action:ic_credit_card_24px"></md-icon>
                <p flex>Saved Payment Details</p>
              </div>
            </md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ng-href="/logout" ng-show="$root.currentUser">Logout</md-button>
          </md-menu-item>
        </md-menu-content>

      </md-menu>
      <md-button hide-sm ui-sref="admin" ng-if="!!currentUser && hasRole(currentUser, 'admin')" aria-label="admin bashboard" class="md-fab md-raised md-mini md-warn">
        <md-icon md-svg-icon="action:ic_dashboard_24px"></md-icon>
      </md-button>
    </div>
  </md-toolbar>


<section layout="row" flex>

  <md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left">

    <md-toolbar class="md-theme-indigo">
      <h1 class="md-toolbar-tools">Menu</h1>
    </md-toolbar>
    <md-content layout-padding="">
      <md-list>
        <md-list-item ng-click="nav.goTo('store')">
          <md-icon md-svg-icon="action:ic_shopping_cart_24px"></md-icon>
          <p> Store </p>
        </md-list-item>
        <md-list-item ng-click="nav.goTo('faq')">
          <md-icon md-svg-icon="action:ic_help_24px"></md-icon>
          <p> FAQ / How it Works </p>
        </md-list-item>
        <md-divider></md-divider>
        <md-list-item ng-click="nav.goTo('login')" ng-hide="$root.currentUser">
          <md-icon md-svg-icon="action:ic_lock_outline_24px"></md-icon>
          <p>Login</p></md-list-item>
        <md-list-item ng-click="nav.goTo('register')" ng-hide="$root.currentUser">
          <md-icon md-svg-icon="social:ic_person_24px"></md-icon>
          <p>Sign up</p>
        </md-list-item>
        <md-list-item ng-click="nav.goTo('logout')" ng-show="!!$root.currentUser">
          <p>Logout</p>
        </md-list-item>
      </md-list>
    </md-content>

  </md-sidenav>


  <div ui-view flex>
    <div layout="rows" layout-align="center center">
      <md-progress-circular class="md-primary" md-mode="indeterminate"></md-progress-circular>
    </div>
  </div>

</section>


<footer layout="row" layout-align="center end">
  <p><small>Cooperative Food Selling Platform Alpha version 0.0.2</small></p>
  <md-button href="https://github.com/redhead-web/meteor-foodcoop" class="md-icon-button">
    <md-icon md-svg-icon="action:ic_code_24px"></md-icon>
  </md-button>
</footer>

</body>
